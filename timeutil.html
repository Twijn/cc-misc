<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>timeutil - CC-Misc Utilities</title>
    <style>
        :root {
            --bg: #ffffff;
            --text: #1a1a1a;
            --link: #0066cc;
            --border: #e0e0e0;
            --code-bg: #f5f5f5;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #1a1a1a;
                --text: #e0e0e0;
                --link: #4d9fff;
                --border: #333333;
                --code-bg: #2a2a2a;
            }
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--bg);
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            border-bottom: 2px solid var(--border);
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
        }
        .header h1 {
            margin-bottom: 1rem;
            font-size: 2.5rem;
        }
        .header p {
            font-size: 1.1rem;
            line-height: 1.8;
            opacity: 0.9;
        }
        h2 {
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
            font-size: 1.8rem;
        }
        h3 {
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1.3rem;
        }
        code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
        }
        pre {
            background: var(--code-bg);
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            margin: 1rem 0;
        }
        .function {
            margin: 2rem 0;
            padding: 1.5rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: var(--bg);
        }
        .function h3 {
            margin-top: 0;
        }
        .function > p {
            margin: 1rem 0;
            line-height: 1.7;
        }
        .params, .returns {
            margin-top: 1rem;
        }
        .params ul, .returns ul {
            list-style: none;
            padding-left: 0;
        }
        .params li, .returns li {
            padding: 0.5rem 0;
            padding-left: 1rem;
            border-left: 3px solid var(--border);
            margin: 0.25rem 0;
        }
        a {
            color: var(--link);
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .back-link {
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
    <div class="back-link"><a href="index.html">‚Üê Back to index</a></div>
    <div class="header">
        <h1>timeutil</h1>
        <p>A timing utility module for ComputerCraft that provides persistent interval management with two different timing modes: absolute time-based and accumulated runtime-based. Features: Absolute time intervals (based on system time), accumulated time intervals (based on actual runtime), persistent state across computer restarts, pretty-printed time formatting, manual execution control, and automatic interval management with run loop.</p>
    </div>
    <h2>Functions</h2>
    <div class='function'>
        <h3><code>now()</code></h3>
        <p>Get current UTC timestamp in milliseconds</p>
        <div class='returns'><strong>Returns:</strong> number # Current timestamp in milliseconds</div>
    </div>
    <div class='function'>
        <h3><code>module.every(cb, intervalTime, fileName)</code></h3>
        <p>Create an absolute time-based interval that runs based on system time This type of interval will "catch up" if the computer was offline, running immediately if the interval time has passed since the last recorded execution.</p>
        <div class='params'>
            <strong>Parameters:</strong>
            <ul>
                <li><code>cb</code> (function): Callback function to execute when interval triggers</li>
                <li><code>intervalTime</code> (number): Interval duration in seconds</li>
                <li><code>fileName</code> (string): File path to persist the last run timestamp</li>
            </ul>
        </div>
        <div class='returns'><strong>Returns:</strong> TimeutilInterval # Interval object with control methods</div>
    </div>
    <div class='function'>
        <h3><code>module.everyLoaded(cb, intervalTime, fileName)</code></h3>
        <p>Create a runtime-based interval that accumulates time only when the program is running This type of interval will NOT catch up after downtime, only counting actual runtime. Useful for operations that should happen after X seconds of actual program execution.</p>
        <div class='params'>
            <strong>Parameters:</strong>
            <ul>
                <li><code>cb</code> (function): Callback function to execute when interval triggers</li>
                <li><code>intervalTime</code> (number): Interval duration in seconds of actual runtime</li>
                <li><code>fileName</code> (string): File path to persist the accumulated elapsed time</li>
            </ul>
        </div>
        <div class='returns'><strong>Returns:</strong> TimeutilInterval # Interval object with control methods</div>
    </div>
    <div class='function'>
        <h3><code>module.run()</code></h3>
        <p>Start the main interval management loop This function blocks and continuously checks all registered intervals, executing them when their time has elapsed. Runs indefinitely until terminated.</p>
    </div>
    <div class='function'>
        <h3><code>module.getRelativeTime(sec)</code></h3>
        <p>Format a duration in seconds into a human-readable relative time string</p>
        <div class='params'>
            <strong>Parameters:</strong>
            <ul>
                <li><code>sec</code> (number): Duration in seconds</li>
            </ul>
        </div>
        <div class='returns'><strong>Returns:</strong> string # Formatted time string (e.g., "5.2 minutes", "1 day", "30 seconds")</div>
    </div>
</body>
</html>
